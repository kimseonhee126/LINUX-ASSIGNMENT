#!/bin/bash

main_page()
{
    echo "                         ____   ___  ____ ___ _       _ "
    echo "                        / ___| / _ \/ ___|_ _| |     / |"
    echo "                        \___ \| | | \___ \| || |     | |"
    echo "                         ___) | |_| |___) | || |___  | |"
    echo "                        |____/ \___/|____/___|_____| |_|"
    echo -e "\n"
    echo "                            _  _____  _    __  ____  __"
    echo "                           / \|_   _|/ \   \ \/ /\ \/ /"
    echo "                          / _ \ | | / _ \   \  /  \  / "
    echo "                         / ___ \| |/ ___ \  /  \  /  \ "
    echo '                        /_/   \_\_/_/   \_\/_/\_\/_/\_\'
    echo "              "
    echo "                                               202100249 KSH"
    echo "      "
}

main_opt()
{
    echo -e "\t\t\t\033[44m   JOIN   \033[0m" "\t\t\033[44m  SIGN IN  \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\033[44m   EXIT   \033[0m" "\t\t\033[44m  SIGN OUT \033[0m" 
}

main_opt1()
{
    echo -e "\t\t\t\033[41m   JOIN   \033[0m" "\t\t\033[44m  SIGN IN  \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\033[44m   EXIT   \033[0m" "\t\t\033[44m  SIGN OUT \033[0m" 
}

main_opt2()
{
    echo -e "\t\t\t\033[44m   JOIN   \033[0m" "\t\t\033[41m  SIGN IN  \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\033[44m   EXIT   \033[0m" "\t\t\033[44m  SIGN OUT \033[0m" 
}

main_opt3()
{
    echo -e "\t\t\t\033[44m   JOIN   \033[0m" "\t\t\033[44m  SIGN IN  \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\033[41m   EXIT   \033[0m" "\t\t\033[44m  SIGN OUT \033[0m" 
}

main_opt4()
{
    echo -e "\t\t\t\033[44m   JOIN   \033[0m" "\t\t\033[44m  SIGN IN  \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\033[44m   EXIT   \033[0m" "\t\t\033[41m  SIGN OUT \033[0m" 
}

sign_in()
{
    echo -e "                        ____ ___ ____ _   _   ___ _   _"
    echo -e "                       / ___|_ _/ ___| \ | | |_ _| \ | |"
    echo -e "                       \___ \| | |  _|  \| |  | ||  \| |"
    echo -e "                        ___) | | |_| | |\  |  | || |\  |"
    echo -e "                       |____/___\____|_| \_| |___|_| \_|"
    echo -e "\n"
}

sign_opt()
{
    echo -e "\t\t\t\033[44m        ID        \033[0m" "\t\t\033[44m Duplicate check \033[0m"
    echo -e "\n"
    echo -e '\t\t\t\033[44m        PW        \033[0m'
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m   SIGN IN   \033[0m" " \t\033[44m    EXIT    \033[0m"
    echo -e "\n"
}

sign_opt1()
{
    echo -e "\t\t\t\033[41m        ID        \033[0m" "\t\t\033[44m Duplicate check \033[0m"
    echo -e "\n"
    echo -e '\t\t\t\033[44m        PW        \033[0m'
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m   SIGN IN   \033[0m" " \t\033[44m    EXIT    \033[0m"
    echo -e "\n"
}

sign_opt2()
{
    echo -e "\t\t\t\033[44m        ID        \033[0m" "\t\t\033[41m Duplicate check \033[0m"
    echo -e "\n"
    echo -e '\t\t\t\033[44m        PW        \033[0m'
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m   SIGN IN   \033[0m" " \t\033[44m    EXIT    \033[0m"
    echo -e "\n"
}

sign_opt3()
{
    echo -e "\t\t\t\033[44m        ID        \033[0m" "\t\t\033[44m Duplicate check \033[0m"
    echo -e "\n"
    echo -e '\t\t\t\033[41m        PW        \033[0m'
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m   SIGN IN   \033[0m" " \t\033[44m    EXIT    \033[0m"
    echo -e "\n"
}

sign_opt4()
{
    echo -e "\t\t\t\033[44m        ID        \033[0m" "\t\t\033[44m Duplicate check \033[0m"
    echo -e "\n"
    echo -e '\t\t\t\033[44m        PW        \033[0m'
    echo -e "\n"
    echo -e "\t\t\t\t\033[41m   SIGN IN   \033[0m" " \t\033[44m    EXIT    \033[0m"
    echo -e "\n"
}

sign_opt5()
{
    echo -e "\t\t\t\033[44m        ID        \033[0m" "\t\t\033[44m Duplicate check \033[0m"
    echo -e "\n"
    echo -e '\t\t\t\033[44m        PW        \033[0m'
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m   SIGN IN   \033[0m" " \t\033[41m    EXIT    \033[0m"
    echo -e "\n"
}

sign_out()
{
    echo -e "                    ____ ___ ____ _   _    ___  _   _ _____"
    echo -e "                   / ___|_ _/ ___| \ | |  / _ \| | | |_   _|"
    echo -e "                   \___ \| | |  _|  \| | | | | | | | | | |"
    echo -e "                    ___) | | |_| | |\  | | |_| | |_| | | |"
    echo -e "                   |____/___\____|_| \_|  \___/ \___/  |_|"
    echo -e "\n"
}

sign_out_opt()
{
    echo -e "\t\t\t\t\033[44m         ID         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m         PW         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m SIGN OUT \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

sign_out_opt1()
{
    echo -e "\t\t\t\t\033[41m         ID         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m         PW         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m SIGN OUT \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

sign_out_opt2()
{
    echo -e "\t\t\t\t\033[44m         ID         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[41m         PW         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m SIGN OUT \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

sign_out_opt3()
{
    echo -e "\t\t\t\t\033[44m         ID         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m         PW         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[41m SIGN OUT \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

sign_out_opt4()
{
    echo -e "\t\t\t\t\033[44m         ID         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m         PW         \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m SIGN OUT \033[0m" "\t\t\033[41m   EXIT   \033[0m"
}

player1()
{
    echo -e "                      _ ____    _     ___   ____ ___ _   _ "
    echo -e "                     / |  _ \  | |   / _ \ / ___|_ _| \ | |"
    echo -e "                     | | |_) | | |  | | | | |  _ | ||  \| |"
    echo -e "                     | |  __/  | |__| |_| | |_| || || |\  |"
    echo -e "                     |_|_|     |_____\___/ \____|___|_| \_|"
    echo -e "\n"
}

player1_opt()
{
    echo -e "\t\t\t\t\033[44m           ID          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m           PW          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m   LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

player1_opt1()
{
    echo -e "\t\t\t\t\033[41m           ID          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m           PW          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m   LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

player1_opt2()
{
    echo -e "\t\t\t\t\033[44m           ID          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[41m           PW          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m   LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

player1_opt3()
{
    echo -e "\t\t\t\t\033[44m           ID          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m           PW          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[41m   LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

player1_opt4()
{
    echo -e "\t\t\t\t\033[44m           ID          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m           PW          \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m   LOGIN   \033[0m" "\t\t\033[41m   EXIT   \033[0m"
}

player2()
{
    echo -e "                    ____  ____    _     ___   ____ ___ _   _"
    echo -e "                   |___ \|  _ \  | |   / _ \ / ___|_ _| \ | |"
    echo -e "                     __) | |_) | | |  | | | | |  _ | ||  \| |"
    echo -e "                    / __/|  __/  | |__| |_| | |_| || || |\  |"
    echo -e "                   |_____|_|     |_____\___/ \____|___|_| \_|"
    echo -e "\n"
} 

player2_opt()
{
    echo -e "\t\t\t\t\033[44m           ID           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m           PW           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m    LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

player2_opt1()
{
    echo -e "\t\t\t\t\033[41m           ID           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m           PW           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m    LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

player2_opt2()
{
    echo -e "\t\t\t\t\033[44m           ID           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[41m           PW           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m    LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

player2_opt3()
{
    echo -e "\t\t\t\t\033[44m           ID           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m           PW           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[41m    LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
}

player2_opt4()
{
    echo -e "\t\t\t\t\033[44m           ID           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t\t\033[44m           PW           \033[0m"
    echo -e "\n"
    echo -e "\t\t\t  \033[44m    LOGIN   \033[0m" "\t\t\033[41m   EXIT   \033[0m"
}

success()
{
    echo -e "                    ____  _   _  ____ ____ _____ ____ ____ "
    echo -e "                   / ___|| | | |/ ___/ ___| ____/ ___/ ___|"
    echo -e "                   \___ \| | | | |  | |   |  _| \___ \___ \ "
    echo -e "                    ___) | |_| | |__| |___| |___ ___) |__) |"
    echo -e "                   |____/ \___/ \____\____|_____|____/____/"
    echo -e "\n"
}

input_key() 
{
    read -n 1 input
    if [ $input == '' ]; then
        read -n 1 input
	if [ $input == '[' ]; then
	    read -n 1 input
	    if [ $input == 'A' ]; then
	        re=-2
            elif [ $input == 'B' ]; then
	        re=2
	    elif [ $input == 'C' ]; then
	        re=1
	    elif [ $input == 'D' ]; then
	        re=-1
            fi
        fi
    elif [ $input == `` ]; then
        re=0
    fi
}

main_page_exit()
{
    now_dir=-2
    count=0
    while [ "$count" -ne 1 ] 
    do
        input_key
        number=$re
        if [ "$number" -eq -2 ]; then
            temp1=`expr $now_dir - 2`
	    now_dir=`expr $temp1 % 4`
        elif [ "$number" -eq 2 ]; then
            temp1=`expr $now_dir + 2`
	    now_dir=`expr $temp1 % 4`
        elif [ "$number" -eq -1 ]; then
            temp1=`expr $now_dir - 1`
	    now_dir=`expr $temp1 % 4`
        elif [ "$number" -eq 1 ]; then
            temp1=`expr $now_dir + 1`
	    now_dir=`expr $temp1 % 4`
        fi

	clear
        
	main_page
        if [ "$now_dir" -eq 0 ]; then
	    main_opt1
	    if [ "$number" -eq 0 ]; then
	        clear
	        player1
	        player1_opt
		player1_exit
		count=1
            fi
        elif [ "$now_dir" -eq 1 ]; then
	    main_opt2
	    if [ "$number" -eq 0 ]; then
	        clear
	        sign_in
	        sign_opt
		sign_in_exit
		count=1
            fi
        elif [ "$now_dir" -eq 2 ]; then
	    main_opt3
	    if [ "$number" -eq 0 ]; then
	        count=1
            fi
        elif [ "$now_dir" -eq 3 ]; then
	    main_opt4
	    if [ "$number" -eq 0 ]; then
	        clear
		sign_out
		sign_out_opt
		sign_out_exit
		count=1
            fi
        else
	    main_opt
        fi
    done
}

duplicate_check()
{
    file=`cat ./auth.txt`
    line=`echo $file`
    database=`echo $line | tr ",", "\n"`
    
    time=0
    for data in $database
    do
        odd_even=`expr $time % 2`
        if [ "$in_id" == "$data" ] && [ "$odd_even" -eq 0 ]; then
            same_id=0
	    time=`expr $time + 1`
        else
	    same_id=1
	    time=`expr $time + 1`
        fi

	if [ "$same_id" -eq 0 ]; then
	    echo "same id is exist"
        else
	    echo " This id able to sign in"
        fi
    done
}

sign_in_exit()
{
    now_dir=-2
    count=0
    while [ $count -ne 1 ]
    do
        input_key
        number=$re
        if [ "$number" -eq -2 ]; then
            temp1=`expr $now_dir - 2`
            if [ "$temp1" -ge 4 ]; then
                now_dir=`expr $temp1 % 6`
            else
                now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq 2 ]; then
            temp1=`expr $now_dir + 2`
            if [ "$temp1" -ge 4 ]; then
                now_dir=`expr $temp1 % 6`
            else
                now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq -1 ]; then
            temp1=`expr $now_dir - 1`
            if [ "$temp1" -ge 4 ]; then
                now_dir=`expr $temp1 % 6`
            else
                now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq 1 ]; then
            temp1=`expr $now_dir + 1`
            if [ "$temp1" -ge 4 ]; then
                now_dir=`expr $temp1 % 6`
            else
                now_dir=`expr $temp1 % 4`
            fi
        fi

        clear
	sign_in

        if [ "$now_dir" -eq 0 ]; then
	    sign_opt1
	    if [ "$number" -eq 0 ]; then
	        read in_id
		input_key
		enter=$re
		if [ "$enter" -eq 0 ]; then
	            clear
	            sign_in
                    echo -e "\t\t\t\033[41m        "$in_id"        \033[0m" "\t\t\033[44m Duplicate check \033[0m"
                    echo -e "\n"
                    echo -e '\t\t\t\033[44m        PW        \033[0m'
                    echo -e "\n"
                    echo -e "\t\t\t\t\033[44m   SIGN IN   \033[0m" " \t\033[44m    EXIT    \033[0m"
                    echo -e "\n"
                fi
            fi
        elif [ "$now_dir" -eq 1 ]; then
	    sign_opt2
	    if [ "$number" -eq 0 ]; then
	        duplicate_check
		count=1
            fi
        elif [ "$now_dir" -eq 2 ]; then
	    sign_opt3
	    if [ "$number" -eq 0 ]; then
	        read in_pw
		input_key
		enter=$re
		if [ "$enter" -eq 0 ]; then
		    clear
		    sign_in
                    echo -e "\t\t\t\033[41m        "$in_id"        \033[0m" "\t\t\033[44m Duplicate check \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t\033[41m        "$in_pw"        \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t\t\033[44m   SIGN IN   \033[0m" " \t\033[44m    EXIT    \033[0m"
                    echo -e "\n"
		fi
            fi
        elif [ "$now_dir" -eq 3 ]; then
	    sign_opt3
	    now_dir=2
        elif [ "$now_dir" -eq 4 ]; then
	    sign_opt4
	    if [ "$number" -eq 0 ]; then
	        store="$in_id","$in_pw",0,0
		echo -e "$store" >> ./auth.txt
		count=1
            fi
        elif [ "$now_dir" -eq 5 ]; then
	    sign_opt5
	    if [ "$number" -eq 0 ]; then
	       count=1
            fi
        else
            sign_opt
        fi
    done
}

sign_out_exit()
{
    now_dir=-2
    count=0
    while [ "$count" -ne 1 ] 
    do
        input_key
        number=$re
        if [ "$number" -eq -2 ]; then
            temp1=`expr $now_dir - 2`
	    if [ "$temp1" -ge 4 ]; then
	        now_dir=`expr $temp1 % 5`
            else
	        now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq 2 ]; then
            temp1=`expr $now_dir + 2`
	    if [ "$temp1" -ge 4 ]; then
	        now_dir=`expr $temp1 % 5`
            else
	        now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq -1 ]; then
            temp1=`expr $now_dir - 1`
	    if [ "$temp1" -ge 4 ]; then
	        now_dir=`expr $temp1 % 5`
            else
	        now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq 1 ]; then
            temp1=`expr $now_dir + 1`
	    if [ "$temp1" -ge 5 ]; then
	        now_dir=`expr $temp1 % 6`
	    else
	        now_dir=`expr $temp1 % 4`
	    fi
        fi

	clear

	sign_out

        file=`cat ./auth.txt`
        line=`echo $file`
        database=`echo $line | tr "," "\n"`

        if [ "$now_dir" -eq 0 ]; then
	    sign_out_opt1
	    if [ "$number" -eq 0 ]; then
	        read out_id
		input_key
		enter1=$re
		if [ "$enter1" -eq 0 ]; then
		    clear
		    sign_out
                    echo -e "\t\t\t\t\033[41m         "$out_id"         \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t\t\033[44m         PW         \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t  \033[44m SIGN OUT \033[0m" "\t\t\033[44m   EXIT   \033[0m"
                fi
            fi
	elif [ "$now_dir" -eq 2 ]; then
	    sign_out_opt2
	    if [ "$number" -eq 0 ]; then
	        read out_pw
		input_key
		enter1=$re
		if [ "$enter1" -eq 0 ]; then
		    clear
		    sign_out
                    echo -e "\t\t\t\t\033[41m         "$out_id"         \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t\t\033[41m         "$out_pw"         \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t  \033[44m SIGN OUT \033[0m" "\t\t\033[44m   EXIT   \033[0m"
                fi
            fi
	elif [ "$now_dir" -eq 4 ]; then
	    sign_out_opt3
	    if [ "$number" -eq 0 ]; then
                range=0
		remove_id=1
		remove_pw=1
		
		for data in $database
		do
		    id0=`expr $range % 4`
		    id0=`expr $range % 2`
		    pw1=`expr $range % 4`
		    pw1=`expr $range % 2`
	            if [ "$remove_id" -eq 0 ] && [ "$remove_pw" -eq 0 ]; then
			remove=5
			echo 1
			break
                    else
		        remove=99
		    fi

		    if [ "$id0" -eq 0 ] && [ "$out_id" = "$data" ]; then
			remove_id=0
			range=`expr "$range" + 1`
			temp=$out_id
			echo 2
		    elif [ "$remove_id" -eq 0 ] && [ "$pw1" -eq 1 ] && [ "$out_pw" = "$data" ]; then
			remove_pw=0
			range=`expr "$range" + 1`
			echo 3
		    else
			range=`expr "$range" + 1`
			echo 4
		    fi
		done
	        if [ "$remove" -eq 5 ]; then
	            `sed -i '/'$d'/d' ./auth.txt` 
		    count=1
	        else
	 	    count=1
	        fi

            fi
	elif [ "$now_dir" -eq 5 ]; then
	    player1_opt4
	    now_dir=4
	    if [ "$number" -eq 0 ]; then
		count=1
            fi
        else
	    player1_opt
	fi
    done
}

player1_exit()
{
    now_dir=-2
    count=0
    while [ "$count" -ne 1 ] 
    do
        input_key
        number=$re
        if [ "$number" -eq -2 ]; then
            temp1=`expr $now_dir - 2`
	    if [ "$temp1" -ge 4 ]; then
	        now_dir=`expr $temp1 % 5`
            else
	        now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq 2 ]; then
            temp1=`expr $now_dir + 2`
	    if [ "$temp1" -ge 4 ]; then
	        now_dir=`expr $temp1 % 5`
            else
	        now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq -1 ]; then
            temp1=`expr $now_dir - 1`
	    if [ "$temp1" -ge 4 ]; then
	        now_dir=`expr $temp1 % 5`
            else
	        now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq 1 ]; then
            temp1=`expr $now_dir + 1`
	    if [ "$temp1" -ge 5 ]; then
	        now_dir=`expr $temp1 % 6`
	    else
	        now_dir=`expr $temp1 % 4`
	    fi
        fi

	clear

	player1

        file=`cat ./auth.txt`
        line=`echo $file`
        database=`echo $line | tr "," "\n"`

        if [ "$now_dir" -eq 0 ]; then
	    player1_opt1
	    if [ "$number" -eq 0 ]; then
	        read player1_id
		input_key
		enter=$re
		if [ "$enter" -eq 0 ]; then
		    clear
		    player1
                    echo -e "\t\t\t\t\033[41m           "$player1_id"          \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t\t\033[44m           PW          \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t  \033[44m   LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
                fi
            fi
	elif [ "$now_dir" -eq 2 ]; then
	    player1_opt2
	    if [ "$number" -eq 0 ]; then
	        read player1_pw
		input_key
		enter=$re
		if [ "$enter" -eq 0 ]; then
		    clear
		    player1
                    echo -e "\t\t\t\t\033[41m           "$player1_id"          \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t\t\033[41m           "$player1_pw"          \033[0m"
                    echo -e "\n"
                    echo -e "\t\t\t  \033[44m   LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
                fi
            fi
	elif [ "$now_dir" -eq 4 ]; then
	    player1_opt3
	    if [ "$number" -eq 0 ]; then
                range=0
		isId=1
		isPw=1
		
		for data in $database
		do
		    id0=`expr "$range" % 4`
		    id0=`expr $range % 2`
		    pw1=`expr "$range" % 4`
		    pw1=`expr $range % 2`
	            if [ "$isId" -eq 0 ] && [ "$isPw" -eq 0 ]; then
			login=5
			break
                    else
		        login=99
		    fi

		    if [ "$id0" -eq 0 ] && [ "$player1_id" = "$data" ]; then
			isId=0
			range=`expr "$range" + 1`
		    elif [ "$isId" -eq 0 ] && [ "$pw1" -eq 1 ] && [ "$player1_pw" = "$data" ]; then
			isPw=0
			range=`expr "$range" + 1`
		    else
			range=`expr "$range" + 1`
		    fi
		done

		if [ "$login" -eq 5 ]; then
		    clear
		    player2
		    player2_opt
		    player2_exit
                else
		    count=1
                fi
            fi
	elif [ "$now_dir" -eq 5 ]; then
	    player1_opt4
	    now_dir=4
	    if [ "$number" -eq 0 ]; then
		count=1
            fi
        else
	    player1_opt
	fi
    done
}

player2_exit()
{
    now_dir=-2
    count=0
    while [ "$count" -ne 1 ] 
    do
        input_key
        number=$re
        if [ "$number" -eq -2 ]; then
            temp1=`expr $now_dir - 2`
	    if [ "$temp1" -ge 4 ]; then
	        now_dir=`expr $temp1 % 5`
            else
	        now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq 2 ]; then
            temp1=`expr $now_dir + 2`
	    if [ "$temp1" -ge 4 ]; then
	        now_dir=`expr $temp1 % 5`
            else
	        now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq -1 ]; then
            temp1=`expr $now_dir - 1`
	    if [ "$temp1" -ge 4 ]; then
	        now_dir=`expr $temp1 % 5`
            else
	        now_dir=`expr $temp1 % 4`
            fi
        elif [ "$number" -eq 1 ]; then
            temp1=`expr $now_dir + 1`
	    if [ "$temp1" -ge 5 ]; then
	        now_dir=`expr $temp1 % 6`
	    else
	        now_dir=`expr $temp1 % 4`
	    fi
        fi

	clear

	player2

        file=`cat ./auth.txt`
        line=`echo $file`
        database=`echo $line | tr "," "\n"`

        if [ "$now_dir" -eq 0 ]; then
	    player2_opt1
	    if [ "$number" -eq 0 ]; then
	       read player2_id 
	       clear
	       player2
               echo -e "\t\t\t\t\033[41m           "$player2_id"          \033[0m"
               echo -e "\n"
               echo -e "\t\t\t\t\033[44m           PW          \033[0m"
               echo -e "\n"
               echo -e "\t\t\t  \033[44m   LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
            fi
	elif [ "$now_dir" -eq 2 ]; then
	    player2_opt2
	    if [ "$number" -eq 0 ]; then
	       read player2_pw 
	       clear
	       player2
               echo -e "\t\t\t\t\033[41m           "$player2_id"          \033[0m"
               echo -e "\n"
               echo -e "\t\t\t\t\033[41m           "$player2_pw"          \033[0m"
               echo -e "\n"
               echo -e "\t\t\t  \033[44m   LOGIN   \033[0m" "\t\t\033[44m   EXIT   \033[0m"
            fi
	elif [ "$now_dir" -eq 4 ]; then
	    player2_opt3
	    if [ "$number" -eq 0 ]; then
                range=0
		isId=1
		isPw=1
		
		for data in $database
		do
		    id0=`expr "$range" % 4`
		    id0=`expr $range % 2`
		    pw1=`expr "$range" % 4`
		    pw1=`expr $range % 2`
	            if [ "$isId" -eq 0 ] && [ "$isPw" -eq 0 ]; then
			login=5
			break
                    else
		        login=99
		    fi

		    if [ "$id0" -eq 0 ] && [ "$player2_id" = "$data" ]; then
			isId=0
			range=`expr "$range" + 1`
		    elif [ "$isId" -eq 0 ] && [ "$pw1" -eq 1 ] && [ "$player2_pw" = "$data" ]; then
			isPw=0
			range=`expr "$range" + 1`
		    else
			isId=1
			isPw=1
			range=`expr "$range" + 1`
		    fi
		done
		if [ "$login" -eq 5 ]; then
		    clear
		    success
		    count=1
                else
		    count=1
                fi
            fi
	elif [ "$now_dir" -eq 5 ]; then
	    player2_opt4
	    now_dir=4
	    if [ "$number" -eq 0 ]; then
		count=1
            fi
        else
	    player2_opt
	fi
    done
}

main()
{
    main_page
    main_opt
    main_page_exit
}

main
